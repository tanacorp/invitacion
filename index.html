<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adriana Solange - Invitación Real</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

    <style>
        :root { --royal-blue: #1976d2; --gold: #d4af37; --page-bg: #fdfaf1; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #a2d2ff 0%, #ffffff 50%, #a2d2ff 100%);
            margin: 0; min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
        }

        .sparkle-mouse {
            position: fixed; width: 6px; height: 6px; background: white;
            border-radius: 50%; pointer-events: none; z-index: 9999;
            box-shadow: 0 0 10px #fff, 0 0 15px var(--royal-blue);
            animation: fairy-dust 1s forwards;
        }
        @keyframes fairy-dust { to { transform: translateY(40px) scale(0); opacity: 0; } }

        .book {
            width: 90%; max-width: 400px; height: 580px;
            position: relative;
            background: #8b4513;
            border-radius: 15px 25px 25px 15px;
            padding-left: 10px;
            box-shadow: 20px 20px 60px rgba(0,0,0,0.4);
        }

        .page {
            position: absolute; inset: 0; margin: 10px; padding: 40px 25px;
            background-color: var(--page-bg);
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            border: 6px double var(--gold);
            border-radius: 5px 15px 15px 5px;
            display: none; flex-direction: column; align-items: center;
            justify-content: center; text-align: center; overflow: hidden;
        }

        .page.active { display: flex; z-index: 10; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } }

        .name-title { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--royal-blue); line-height: 1.1; margin: 15px 0; }
        .timer-unit { background: #f0f7ff; padding: 10px; border-radius: 10px; border: 1px solid var(--gold); min-width: 65px; }
        
        .music-btn {
            position: fixed; top: 20px; right: 20px; z-index: 1000;
            background: white; border: 2px solid var(--gold);
            border-radius: 50%; width: 45px; height: 45px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .nav-controls {
            position: absolute; bottom: -70px; width: 100%;
            display: flex; justify-content: space-between; z-index: 100;
        }
        .btn-nav { background: white; border: 2px solid var(--gold); border-radius: 50%; width: 45px; height: 45px; color: var(--royal-blue); }

        .mensaje-burbuja {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            border: 1.5px solid var(--gold);
            border-radius: 15px 15px 15px 0;
            padding: 12px; margin-bottom: 15px; text-align: left;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.05); position: relative;
        }
        .mensaje-burbuja strong { color: var(--royal-blue); font-size: 0.85rem; }
        .mensaje-burbuja p { font-style: italic; font-size: 0.85rem; margin: 0; color: #444; }
    </style>
</head>
<body>

<button class="music-btn" onclick="toggleMusic()" id="mBtn"><i class="fas fa-music"></i></button>
<audio id="bgMusic" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<div class="book">
    <div class="page active">
        <i class="fas fa-crown fa-2x text-warning mb-2"></i>
        <p class="small text-muted mb-0">MIS 15 AÑOS</p>
        <h1 class="name-title">Adriana Solange</h1>
        <hr class="w-75" style="border-top: 2px solid var(--gold);">
        <div class="row w-100 small">
            <div class="col-6"><b>Padres</b><br>José Carlos Nuñez<br>Jackeline Quispe</div>
            <div class="col-6"><b>Padrinos</b><br>Ayleen Canto<br>Euler Mamani</div>
        </div>
        <img src="carruaje.png" width="150" class="mt-4 opacity-100">
    </div>

    <div class="page">
        <h4 class="text-primary mb-4 fw-bold">¡Falta Muy Poco!</h4>
        <div class="d-flex gap-2">
            <div class="timer-unit"><div id="d" class="h3 fw-bold mb-0">0</div><small>Días</small></div>
            <div class="timer-unit"><div id="h" class="h3 fw-bold mb-0">00</div><small>Hrs</small></div>
            <div class="timer-unit"><div id="m" class="h3 fw-bold mb-0">00</div><small>Min</small></div>
        </div>
        <div class="mt-5 text-muted">
            <p class="mb-0">Sábado 27 de Diciembre</p>
            <p class="fw-bold h5 text-dark">7:30 PM</p>
        </div>
    </div>

    <div class="page">
        <h5 class="text-primary mb-3"><i class="fas fa-map-marker-alt"></i> Recepción</h5>
        <p class="small mb-2"><b>El Rancho de Pol 2</b><br>Av. Los Ciruelos 492 - SJL</p>
        <div class="ratio ratio-16x9 mb-3 border rounded shadow-sm">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3902.502424056277!2d-77.0098056241031!3d-11.982631441113943!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c5632382cb29%3A0xa3e6a1ef662bc70c!2sEl%20Rancho%20de%20Pol%202!5e0!3m2!1ses!2spe!4v1710000000000!5m2!1ses!2spe" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
        <a href="https://www.google.com/maps/dir/?api=1&destination=El+Rancho+de+Pol+2&destination_place_id=ChIJqcuCI2PFBZERDMcrZu-h5qM" target="_blank" class="btn btn-sm btn-primary btn-rounded shadow">
            <i class="fas fa-route me-2"></i>Cómo llegar
        </a>
    </div>

    <div class="page">
        <i class="fas fa-magic text-info fa-3x mb-4"></i>
        <h2 class="name-title" style="font-size: 2rem;">"Un sueño es un deseo que el corazón crea... hoy ese sueño despierta en mis quince años. Gracias por ser parte de este capítulo mágico donde empiezo a escribir mi propia historia."</h2>
        <p class="text-muted italic">- Hada Madrina</p>
    </div>

    <div class="page">
        <div class="mb-4">
            <i class="fas fa-user-tie fa-2x text-primary mb-2"></i>
            <h5 class="fw-bold">Código de Vestimenta</h5>
            <p class="small">
                <span class="badge rounded-pill shadow-sm" style="background-color: var(--royal-blue); font-size: 0.9rem;">Elegante / Gala</span>
                <br><br>
                Nos encantaría verte lucir tu mejor gala.
                <br>
                <small class="text-muted">(Se reserva el color azul rey para la quinceañera)</small>
            </p>
        </div>
        <hr class="w-75 mx-auto" style="border-top: 1px double var(--gold);">
        <div class="mt-4">
            <i class="fab fa-instagram fa-2x mb-2" style="color: #E1306C;"></i>
            <h5 class="fw-bold">¡Comparte la Magia!</h5>
            <p class="small">Usa nuestro hashtag oficial:</p>
            <div class="p-2 border rounded-3 bg-light shadow-sm">
                <h4 class="mb-0 fw-bold" style="color: var(--royal-blue);">#Los15DeAdriana</h4>
            </div>
        </div>
    </div>

    <div class="page">
        <h5 class="text-primary mb-3">Confirmar Asistencia</h5>
        <form id="formAsistencia" class="w-100 text-start small">
            <input type="hidden" name="tipo" value="asistencia">
            <div class="mb-2">
                <label class="fw-bold">Tu Nombre:</label>
                <input type="text" name="nombre" class="form-control" required>
            </div>
            <div class="mb-2">
                <label class="fw-bold">Acompañantes:</label>
                <input type="text" name="invitado1" class="form-control mb-1" placeholder="Invitado 1">
                <input type="text" name="invitado2" class="form-control" placeholder="Invitado 2">
            </div>
            <button type="submit" class="btn btn-primary w-100 btn-rounded">Confirmar Lugar</button>
        </form>
        <div id="statusAsistencia" class="mt-2 small fw-bold"></div>
    </div>

    <div class="page">
        <h5 class="text-primary mb-3">Envía un Deseo Mágico</h5>
        <form id="formSaludos" class="w-100 text-start small">
            <input type="hidden" name="tipo" value="saludo">
            <div class="mb-2">
                <label class="fw-bold">Tu Nombre:</label>
                <input type="text" name="nombre" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="fw-bold">Mensaje para Adriana:</label>
                <textarea name="mensaje" class="form-control" rows="4" maxlength="300" required></textarea>
            </div>
            <button type="submit" class="btn btn-warning w-100 btn-rounded">Enviar Saludo</button>
        </form>
        <div id="statusSaludos" class="mt-2 small fw-bold"></div>
    </div>

    <div class="page">
        <h5 class="text-primary mb-3">Muro de Deseos</h5>
        <div id="muroMensajes" style="overflow-y: auto; max-height: 420px; width: 100%;" class="p-2">
            <p class="small text-muted">Cargando...</p>
        </div>
        <button class="btn btn-sm btn-outline-primary mt-2" onclick="cargarMensajes()">Actualizar</button>
    </div>

    <div class="nav-controls">
        <button class="btn-nav" onclick="prev()"><i class="fas fa-chevron-left"></i></button>
        <button class="btn-nav" onclick="next()"><i class="fas fa-chevron-right"></i></button>
    </div>
</div>

<script>
    let cur = 0;
    const pages = document.querySelectorAll('.page');
    function show(i) { pages.forEach((p, idx) => p.classList.toggle('active', i === idx)); }
    function next() { if(cur < pages.length - 1) show(++cur); }
    function prev() { if(cur > 0) show(--cur); }

    document.addEventListener('mousemove', e => {
        let s = document.createElement('div');
        s.className = 'sparkle-mouse';
        s.style.left = e.clientX + 'px'; s.style.top = e.clientY + 'px';
        document.body.appendChild(s);
        setTimeout(() => s.remove(), 800);
    });

    function toggleMusic() {
        const m = document.getElementById('bgMusic');
        const b = document.getElementById('mBtn');
        if (m.paused) { m.play(); b.innerHTML = '<i class="fas fa-pause"></i>'; }
        else { m.pause(); b.innerHTML = '<i class="fas fa-music"></i>'; }
    }

    const scriptURL = 'https://script.google.com/macros/s/AKfycbz3xR_-JTUGbjcoIaTilE0fDej-X-wcvYd5yh0I0pcFNmNYbXq6-0Ju4i8RxdOln2v4xw/exec'; 

    function configurarForm(formId, statusId) {
        const f = document.getElementById(formId);
        f.addEventListener('submit', e => {
            e.preventDefault();
            const b = f.querySelector('button');
            const s = document.getElementById(statusId);
            b.disabled = true; b.innerText = "Enviando...";
            fetch(scriptURL, { method: 'POST', body: new FormData(f)})
                .then(() => {
                    s.innerText = "✨ ¡Enviado con éxito!";
                    s.style.color = "green";
                    f.reset(); b.disabled = false; b.innerText = "Enviar otro";
                    if(formId === 'formSaludos') cargarMensajes();
                }).catch(() => { s.innerText = "❌ Error"; s.style.color = "red"; b.disabled = false; b.innerText = "Reintentar"; });
        });
    }

    function cargarMensajes() {
        const muro = document.getElementById('muroMensajes');
        fetch(scriptURL).then(r => r.json()).then(data => {
            muro.innerHTML = data.length ? "" : "<p class='small text-muted'>Esperando mensajes...</p>";
            data.forEach(m => {
                muro.innerHTML += `<div class="mensaje-burbuja"><strong>${m.nombre}:</strong><p>"${m.mensaje}"</p></div>`;
            });
        }).catch(() => { muro.innerHTML = "<p class='small text-danger'>No se pudieron cargar los mensajes.</p>"; });
    }

    configurarForm('formAsistencia', 'statusAsistencia');
    configurarForm('formSaludos', 'statusSaludos');

    window.onload = function() {
        cargarMensajes();
        setInterval(() => {
            const target = new Date('December 27, 2025 19:30:00') - new Date();
            document.getElementById('d').innerText = Math.max(0, Math.floor(target / 86400000));
            document.getElementById('h').innerText = Math.max(0, Math.floor((target % 86400000) / 3600000));
            document.getElementById('m').innerText = Math.max(0, Math.floor((target % 3600000) / 60000));
        }, 1000);
    };
</script>
</body>
</html>